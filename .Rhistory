ds<- dsL %>%
dplyr::select(vars)
age <- c(25, 30, 56)
gender <- c("male", "female", "male")
weight <- c(160, 110, 220)
ds <- data.frame(age,gender,weight)
ds
age <- c(25, 30, 56)
gender <- c("male", "female", "male")
weight <- c(160, 110, 220)
dsL <- data.frame(age,gender,weight)
vars<- c("age","gender","weight")
ds<- dsL %>%
dplyr::select(vars)
str(ds)
age <- c(25, 30, 56)
gender <- c("male", "female", "male")
weight <- c(160, 110, 220)
dsL <- data.frame(age,gender,weight)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::select(vars)
str(ds)
age <- c(25, 30, 56)
gender <- c("male", "female", "male")
weight <- c(160, 110, 220)
dsL <- data.frame(age,gender,weight)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::select(vars)
str(ds)
age <- c(25, 30, 56)
gender <- c("male", "female", "male")
weight <- c(160, 110, 220)
dsL <- data.frame(age,gender,weight)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::select(paste(vars))
str(ds)
age <- c(25, 30, 56)
gender <- c("male", "female", "male")
weight <- c(160, 110, 220)
dsL <- data.frame(age,gender,weight)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::select(cat(vars))
str(ds)
age <- c(25, 30, 56)
gender <- c("male", "female", "male")
weight <- c(160, 110, 220)
dsL <- data.frame(age,gender,weight)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::select(print(vars))
str(ds)
aesDefs
age <- c(25, 30, 56)
gender <- c("male", "female", "male")
weight <- c(160, 110, 220)
dsL <- data.frame(age,gender,weight)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::select(vars)
str(ds)
vars
cat(vars)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::select(cat(vars))
str(ds)
age
gender
vars<- c(age,gender)
ds<- dsL %>%
dplyr::select(cat(vars))
str(ds)
vars<- c(age,gender)
ds<- dsL %>%
dplyr::select(vars)
str(ds)
names(vars)
age <- c(25, 30, 56)
gender <- c("male", "female", "male")
weight <- c(160, 110, 220)
dsL <- data.frame(age,gender,weight)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::select(obj = vars)
str(ds)
cat(vars)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::select(obj = vars)
str(ds)
?dplyr::select
vars<- c("age","gender")
ds<- dsL %>%
dplyr::select(matches(vars))
str(ds)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::select(as.names(vars))
str(ds)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::select("age")
str(ds)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::select("age")
str(ds)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::select(as.name("age"))
str(ds)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::arrange(as.name("age"))
str(ds)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::arrange(vars)
str(ds)
vars<- c("age","gender")
ds<- dsL %>%
dplyr::arrange(age)
str(ds)
ds<- dsL %>%
dplyr::filter(id==25)
dplyr::select(
sample, id, sex, race, bmonth,byear, attendPR, relprefPR,relraisedPR,
year,
agemon, ageyear, famrel, attend,
values, todo, obeyed, pray, decisions,
relpref, bornagain, faith,
calm, blue, happy, depressed, nervous,
tv, computer, internet)
print(ds)
dsL<-readRDS("./Data/Derived/dsL.rds")
ds<- dsL %>%
dplyr::filter(id==25)
dplyr::select(
sample, id, sex, race, bmonth,byear, attendPR, relprefPR,relraisedPR,
year,
agemon, ageyear, famrel, attend,
values, todo, obeyed, pray, decisions,
relpref, bornagain, faith,
calm, blue, happy, depressed, nervous,
tv, computer, internet)
print(ds)
ds<- dsL %>%
dplyr::select(
sample, id, sex, race, bmonth,byear, attendPR, relprefPR,relraisedPR,
year,
agemon, ageyear, famrel, attend,
values, todo, obeyed, pray, decisions,
relpref, bornagain, faith,
calm, blue, happy, depressed, nervous,
tv, computer, internet)
str(ds)
ds
ds[1]
ds[1,2]
ds[1,1:10]
p<-ggplot(ds, aes(x=age,y=attend, color=idF))
# geoms
p<-p+ geom_line(size=.4)
p<-p+ geom_point(size=2, position=position_dodge(0.2))
# scales
p<-p+ scale_y_continuous("Church attendance",
limits=c(0, 8),
breaks=c(1:8))
p<-p+ scale_x_continuous("Age in years",
limits=c(16,31),
breaks=seq(from=12, to=31,by=1))
p <- p + scale_color_manual(values=c("black","red","green", "purple"))
# annotations
p<-p+ labs(title=paste0("In the past year, how often have you attended a worship service?"))
p <- p + guides(color = guide_legend(title="Respondents"))
# themes
p <- p + ggplot2::theme_bw()
p <- p + ggplot2::theme_bw(base_size=baseSize)
p <- p + ggplot2::theme(title=ggplot2::element_text(colour="gray20",size = 12))
p <- p + ggplot2::theme(axis.text=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(axis.title=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(panel.border = ggplot2::element_rect(colour="gray80"))
p <- p + ggplot2::theme(axis.ticks.length = grid::unit(0, "cm"))
p
dplyr::select(idF,byear,bmonth,year,ageyear,agemon)
print(ds[ds$idF==25,])
ds<- dsL %>% dplyr::filter(id %in% c(4,25,35,47),year %in% c(2000:2011)) %>%
dplyr::select(idF,byear,bmonth,year,ageyear,agemon)
print(ds[ds$idF==25,])
p<-ggplot(ds, aes(x=age,y=attend, color=idF))
# geoms
p<-p+ geom_line(size=.4)
p<-p+ geom_point(size=2, position=position_dodge(0.2))
# scales
p<-p+ scale_y_continuous("Church attendance",
limits=c(0, 8),
breaks=c(1:8))
p<-p+ scale_x_continuous("Age in years",
limits=c(16,31),
breaks=seq(from=12, to=31,by=1))
p <- p + scale_color_manual(values=c("black","red","green", "purple"))
# annotations
p<-p+ labs(title=paste0("In the past year, how often have you attended a worship service?"))
p <- p + guides(color = guide_legend(title="Respondents"))
# themes
p <- p + ggplot2::theme_bw()
p <- p + ggplot2::theme_bw(base_size=baseSize)
p <- p + ggplot2::theme(title=ggplot2::element_text(colour="gray20",size = 12))
p <- p + ggplot2::theme(axis.text=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(axis.title=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(panel.border = ggplot2::element_rect(colour="gray80"))
p <- p + ggplot2::theme(axis.ticks.length = grid::unit(0, "cm"))
p
ds<- dsL %>%  dplyr::filter(year==2000,sample==1)
p<-ggplot(ds, aes(x=attendF, fill=attendF))
p <- p + geom_bar(color="black")
p <- p + scale_fill_manual(values=attendCol8, na.value=NACol, guide=FALSE)
p <- p + coord_flip()
# p <- p + guides(fill = guide_legend(reverse=TRUE, title="Attendence")) #http://www.cookbook-r.com/Graphs/Legends_(ggplot2)/#reversing-the-order-of-items-in-the-legend
p <- p + labs(title="How often did you attend a place of worship in the last year (2000)?", x="Church attendance", y="Count")
p <- p + ggplot2::theme_bw()
p <- p + ggplot2::theme_bw(base_size=baseSize)
p <- p + ggplot2::theme(title=ggplot2::element_text(colour="gray20",size = 12))
p <- p + ggplot2::theme(axis.text=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(axis.title=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(panel.border = ggplot2::element_rect(colour="gray80"))
p <- p + ggplot2::theme(axis.ticks.length = grid::unit(0, "cm"))
p
ds<- dsL %.%
dplyr::filter(sample==1) %.%   # comment out to count NA in the total
dplyr::group_by(yearF,attendF) %.%
dplyr::summarize(count = length( attendF)) %.%
dplyr::mutate(total = sum(count),
percent= count/total)
# head(ds,10)
p<- ggplot( ds, aes(x=yearF, y=percent, fill=attendF))  #  keeping NA in calculations
# geoms
p<- p+ geom_bar(position="stack", stat="identity")
# scales
p<- p+ scale_fill_manual(values = attendCol8)
p<- p+ scale_y_continuous(limits=c(0, 1),
breaks=c(.1,.2,.3,.4,.5,.6,.7,.8,.9,1))
p<- p+ scale_x_discrete(limits=as.character(c(2000:2011)))
# annotations
p<- p + guides(fill = guide_legend(reverse=TRUE, title="Response category"))
p<-  p+ labs(title = "In the past year, how often have you attended a worship service?",
x="Wave of measurement",
y="Proportion of total")
# themes
p <- p + ggplot2::theme_bw()
p <- p + ggplot2::theme_bw(base_size=baseSize)
p <- p + ggplot2::theme(title=ggplot2::element_text(colour="gray20",size = 12))
p <- p + ggplot2::theme(axis.text=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(axis.title=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(panel.border = ggplot2::element_rect(colour="gray80"))
p <- p + ggplot2::theme(axis.ticks.length = grid::unit(0, "cm"))
p
ds<- dsL %.%
dplyr::filter(sample==1, !is.na(attendF)) %.%   # comment out to count NA in the total
dplyr::group_by(yearF,attendF) %.%
dplyr::summarize(count = length( attendF)) %.%
dplyr::mutate(total = sum(count),
percent= count/total)
# head(ds,10)
p<- ggplot( ds, aes(x=yearF, y=percent, fill=attendF))  #  keeping NA in calculations
# geoms
p<- p+ geom_bar(position="stack", stat="identity")
# scales
p<- p+ scale_fill_manual(values = attendCol8)
p<- p+ scale_y_continuous(limits=c(0, 1),
breaks=c(.1,.2,.3,.4,.5,.6,.7,.8,.9,1))
p<- p+ scale_x_discrete(limits=as.character(c(2000:2011)))
# annotations
p<- p + guides(fill = guide_legend(reverse=TRUE, title="Response category"))
p<-  p+ labs(title = "In the past year, how often have you attended a worship service?",
x="Wave of measurement",
y="Proportion of total")
# themes
p <- p + ggplot2::theme_bw()
p <- p + ggplot2::theme_bw(base_size=baseSize)
p <- p + ggplot2::theme(title=ggplot2::element_text(colour="gray20",size = 12))
p <- p + ggplot2::theme(axis.text=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(axis.title=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(panel.border = ggplot2::element_rect(colour="gray80"))
p <- p + ggplot2::theme(axis.ticks.length = grid::unit(0, "cm"))
p
ds<- dsL %.%
dplyr::filter(sample==1, year %in% c(2000:2011), !is.na(attend)) %.%   # comment out to count NA in the total
dplyr::group_by(yearF,attendF) %.%
dplyr::summarize(count = length( attendF)) %.%
dplyr::mutate(total = sum(count),
percent= count/total)
# head(ds,10)
p<- ggplot( ds, aes(x=yearF, y=percent, color=attendF))  #  keeping NA in calculations
# geoms
p<- p+ geom_line(aes(group=attendF), stat="identity", size=.7)
p<- p+ geom_point(aes(fill=attendF), shape=21, size=3, color="black",position=position_dodge(0.2) )
# scales
p<- p+ scale_color_manual(values = attendCol8,na.value=NACol)
p<- p+ scale_fill_manual(values = attendCol8,na.value=NACol)
p<- p+ scale_y_continuous(limits=c(0, .4),
breaks=c(0,.1,.2,.3,.4))
p<- p+ scale_x_discrete(limits=as.character(c(2000:2011)))
# # annotations
p<- p + guides(fill = guide_legend(reverse=FALSE, title="Response category"))
p<- p + guides(color = FALSE)
p<-  p+ labs(title = "In the past year, how often have you attended a worship service?",
x="Wave of measurement",
y="Proportion of total")
# # themes
p <- p + ggplot2::theme_bw()
p <- p + ggplot2::theme_bw(base_size=baseSize)
p <- p + ggplot2::theme(title=ggplot2::element_text(colour="gray20",size = 12))
p <- p + ggplot2::theme(axis.text=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(axis.title=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(panel.border = ggplot2::element_rect(colour="gray80"))
p <- p + ggplot2::theme(axis.ticks.length = grid::unit(0, "cm"))
p
ds<- dsL %>% dplyr::filter(id %in% c(4,25,35,47),year %in% c(2000:2011)) %>% dplyr::select(idF,year,attend) %>%
mutate(time=year-2000)
p<-ggplot(ds, aes(x=time,y=attend, color=idF))
# geoms
p<-p+ geom_line(size=.4)
p<-p+ geom_point(size=2, position=position_dodge(0.2))
# scales
p<-p+ scale_y_continuous("Church attendance",
limits=c(0, 8),
breaks=c(1:8))
p<-p+ scale_x_continuous("Years since 2000",
limits=c(0,11),
breaks=c(0:11))
p <- p + scale_color_manual(values=c("black","red","green", "purple"))
# annotations
p<-p+ labs(title=paste0("In the past year, how often have you attended a worship service?"))
p <- p + guides(color = guide_legend(title="Respondents"))
# themes
p <- p + ggplot2::theme_bw()
p <- p + ggplot2::theme_bw(base_size=baseSize)
p <- p + ggplot2::theme(title=ggplot2::element_text(colour="gray20",size = 12))
p <- p + ggplot2::theme(axis.text=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(axis.title=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(panel.border = ggplot2::element_rect(colour="gray80"))
p <- p + ggplot2::theme(axis.ticks.length = grid::unit(0, "cm"))
p
ds<- dsL %>% dplyr::filter(id %in% c(25),year %in% c(2000:2011)) %>%
dplyr::select(idF,byear,bmonth,year,ageyear,agemon)
print(ds[ds$idF==25,])
ds<- dsL %>% dplyr::filter(id %in% c(25),year %in% c(2000:2011)) %>%
dplyr::select(idF,byear,bmonth,year,ageyear,agemon) %.%
dplyr::mutate(time=year-2000, age=agemon/12)
print(ds[ds$idF==25,])
p<-ggplot(ds, aes(x=age,y=attend, color=idF))
# geoms
p<- p + geom_line(size=.4)
p<- p + geom_point(size=2, position=position_dodge(0.2))
# scales
p<- p + scale_y_continuous("Church attendance",
limits=c(0, 8),
breaks=c(1:8))
p<- p + scale_x_continuous("Age in years",
limits=c(16,31),
breaks=seq(from=12, to=31,by=1))
p <- p + scale_color_manual(values=c("black","red","green", "purple"))
# annotations
p<-  p + labs(title=paste0("In the past year, how often have you attended a worship service?"))
p<-  p + guides(color = guide_legend(title="Respondents"))
p<-  p + geom_point(position=position_dodge(0.2) )
# themes
p <- p + ggplot2::theme_bw()
p <- p + ggplot2::theme_bw(base_size=baseSize)
p <- p + ggplot2::theme(title=ggplot2::element_text(colour="gray20",size = 12))
p <- p + ggplot2::theme(axis.text=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(axis.title=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(panel.border = ggplot2::element_rect(colour="gray80"))
p <- p + ggplot2::theme(axis.ticks.length = grid::unit(0, "cm"))
p
ds<- dsL %>% dplyr::filter(id %in% c(25),year %in% c(2000:2011)) %>%
dplyr::select(idF,byear,bmonth,year,ageyear,agemon,attend) %.%
dplyr::mutate(time=year-2000, age=agemon/12)
p<-ggplot(ds, aes(x=age,y=attend, color=idF))
# geoms
p<- p + geom_line(size=.4)
p<- p + geom_point(size=2, position=position_dodge(0.2))
# scales
p<- p + scale_y_continuous("Church attendance",
limits=c(0, 8),
breaks=c(1:8))
p<- p + scale_x_continuous("Age in years",
limits=c(16,31),
breaks=seq(from=12, to=31,by=1))
p <- p + scale_color_manual(values=c("black","red","green", "purple"))
# annotations
p<-  p + labs(title=paste0("In the past year, how often have you attended a worship service?"))
p<-  p + guides(color = guide_legend(title="Respondents"))
p<-  p + geom_point(position=position_dodge(0.2) )
# themes
p <- p + ggplot2::theme_bw()
p <- p + ggplot2::theme_bw(base_size=baseSize)
p <- p + ggplot2::theme(title=ggplot2::element_text(colour="gray20",size = 12))
p <- p + ggplot2::theme(axis.text=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(axis.title=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(panel.border = ggplot2::element_rect(colour="gray80"))
p <- p + ggplot2::theme(axis.ticks.length = grid::unit(0, "cm"))
p
ds<- dsL %>% dplyr::filter(id %in% c(25),year %in% c(2000:2011)) %>%
dplyr::select(idF,byear,bmonth,year,ageyear,agemon,attend) %.%
dplyr::mutate(time=year-2000, age=agemon/12)
print(ds[ds$idF==25,])
dF<- c(ds, select(dsL,attend))
dF
dF<- c(ds, select(dsL,attend))
ds<- dsL %>% dplyr::filter(id %in% c(4,25,35,47),year %in% c(2000:2011)) %>%
dplyr::select(idF,byear,bmonth,year,ageyear,agemon) %.%
dplyr::mutate(time=year-2000, age=agemon/12)
p<-ggplot(ds, aes(x=age,y=attend, color=idF))
# geoms
p<- p + geom_line(size=.4)
p<- p + geom_point(size=2, position=position_dodge(0.2))
# scales
p<- p + scale_y_continuous("Church attendance",
limits=c(0, 8),
breaks=c(1:8))
p<- p + scale_x_continuous("Age in years",
limits=c(16,31),
breaks=seq(from=12, to=31,by=1))
p <- p + scale_color_manual(values=c("black","red","green", "purple"))
# annotations
p<-  p + labs(title=paste0("In the past year, how often have you attended a worship service?"))
p<-  p + guides(color = guide_legend(title="Respondents"))
p<-  p + geom_point(position=position_dodge(0.2) )
# themes
p <- p + ggplot2::theme_bw()
p <- p + ggplot2::theme_bw(base_size=baseSize)
p <- p + ggplot2::theme(title=ggplot2::element_text(colour="gray20",size = 12))
p <- p + ggplot2::theme(axis.text=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(axis.title=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(panel.border = ggplot2::element_rect(colour="gray80"))
p <- p + ggplot2::theme(axis.ticks.length = grid::unit(0, "cm"))
p
ds<- dsL %>% dplyr::filter(id %in% c(4,25,35,47),year %in% c(2000:2011)) %>%
dplyr::select(idF,byear,bmonth,year,ageyear,agemon,attend) %.%
dplyr::mutate(time=year-2000, age=agemon/12)
p<-ggplot(ds, aes(x=age,y=attend, color=idF))
# geoms
p<- p + geom_line(size=.4)
p<- p + geom_point(size=2, position=position_dodge(0.2))
# scales
p<- p + scale_y_continuous("Church attendance",
limits=c(0, 8),
breaks=c(1:8))
p<- p + scale_x_continuous("Age in years",
limits=c(16,31),
breaks=seq(from=12, to=31,by=1))
p <- p + scale_color_manual(values=c("black","red","green", "purple"))
# annotations
p<-  p + labs(title=paste0("In the past year, how often have you attended a worship service?"))
p<-  p + guides(color = guide_legend(title="Respondents"))
p<-  p + geom_point(position=position_dodge(0.2) )
# themes
p <- p + ggplot2::theme_bw()
p <- p + ggplot2::theme_bw(base_size=baseSize)
p <- p + ggplot2::theme(title=ggplot2::element_text(colour="gray20",size = 12))
p <- p + ggplot2::theme(axis.text=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(axis.title=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(panel.border = ggplot2::element_rect(colour="gray80"))
p <- p + ggplot2::theme(axis.ticks.length = grid::unit(0, "cm"))
p
aesDefs
aesDefs
ds<- dsL %>%  dplyr::filter(year==2000,sample==1)
p<-ggplot(ds, aes(x=attendF, fill=attendF))
p <- p + geom_bar(color="black")
p <- p + scale_fill_manual(values=attendCol8, na.value=NACol, guide=FALSE)
p <- p + coord_flip()
# p <- p + guides(fill = guide_legend(reverse=TRUE, title="Attendence")) #http://www.cookbook-r.com/Graphs/Legends_(ggplot2)/#reversing-the-order-of-items-in-the-legend
p <- p + labs(title="How often did you attend a place of worship in the last year (2000)?", x="Church attendance", y="Count")
p <- p + ggplot2::theme_bw()
p <- p + ggplot2::theme_bw(base_size=baseSize)
p <- p + ggplot2::theme(title=ggplot2::element_text(colour="gray20",size = 12))
p <- p + ggplot2::theme(axis.text=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(axis.title=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(panel.border = ggplot2::element_rect(colour="gray80"))
p <- p + ggplot2::theme(axis.ticks.length = grid::unit(0, "cm"))
p
ds<- dsL %>% dplyr::filter(id %in% c(1:9000), year==1997) %>% dplyr::select(id,sampleF,sexF, raceF) %>%
dplyr::group_by(sampleF, sexF,raceF) %>% dplyr::summarize (count= n())
# ds<- reshape2::melt(ds,id.vars= colnames(ds))
# ds
p<- ggplot(ds, aes(x=raceF, y=count, fill=sexF))
#geoms
p<- p+ geom_bar(stat="identity", position="dodge")
p<- p+ facet_grid(sampleF~.)
p<- p+ geom_text(aes(label=count), position=position_dodge(.9), vjust=-.2, size=3.5)
# scales
p<- p + scale_y_continuous( limits= c(0,2700))
# annotations
p<- p + guides(fill = guide_legend( title="Sex"))
p<- p+ labs(title = "Basic demographic constitution of NLSY97",
x="Race",
y="Sampling frame")
# themes
p <- p + ggplot2::theme_bw()
p <- p + ggplot2::theme_bw(base_size=baseSize)
p <- p + ggplot2::theme(title=ggplot2::element_text(colour="gray20",size = 12))
p <- p + ggplot2::theme(axis.text=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(axis.title=ggplot2::element_text(colour="gray40"))
p <- p + ggplot2::theme(panel.border = ggplot2::element_rect(colour="gray80"))
p
