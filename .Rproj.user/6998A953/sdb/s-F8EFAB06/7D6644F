{
    "contents" : "<!--  Set the working directory to the repository's base directory; this assumes the report is nested inside of only one directory.-->\n\n\n\n\nMetrics: labeling factors and exploring scales\n==============================================\n\nReport explains how the response categories from NLSY97 questionnaire\nare labeled and demonstrates application of labeled factors in data\noperations and graphing.\n\nData preliminaries\n------------------\n\nInitial point of departure - the\n[databox](http://statcanvas.net/thesis/databox/) of the selected\nvariables, described in the\n[Methods](http://statcanvas.net/thesis/III_methods/03_Methods.htm)\nchapter. ![Figure 3.2](./figure_rmd/3_Methods_Figure_3_2.png) This\n[databox](http://statcanvas.net/thesis/databox/) corresponds to the\ndataset **dsL** produced by\n[Derive\\_dsL\\_from\\_Extract](https://github.com/andkov/Longitudinal_Models_of_Religiosity_NLSY97/blob/master/Data/Derive_dsL_from_Extract.md)\nreport, given in the Appendix.\n\n    dsL<-readRDS(\"./Data/Derived/dsL.rds\")\n\n![Figure 3.3](./figure_rmd/3_Methods_Figure_3_3.png)\n\nLabeling Factor Levels\n----------------------\n\nReview of the item reference\n[cards](http://statcanvas.net/thesis/databox/) shows that initially, all\nitems were recorded on some discrete scale, either counting occasions or\nassigning an intiger to a category of response. However, data were saved\nas numerical values or intigers\n\n    ds<- dsL[,1:(ncol(dsL)/2)]# selects the first half of variables\n    str(ds)\n\n    'data.frame':   134745 obs. of  30 variables:\n     $ sample     : int  1 1 1 1 1 1 1 1 1 1 ...\n     $ id         : int  1 1 1 1 1 1 1 1 1 1 ...\n     $ sex        : int  2 2 2 2 2 2 2 2 2 2 ...\n     $ race       : int  4 4 4 4 4 4 4 4 4 4 ...\n     $ bmonth     : int  9 9 9 9 9 9 9 9 9 9 ...\n     $ byear      : int  1981 1981 1981 1981 1981 1981 1981 1981 1981 1981 ...\n     $ attendPR   : int  7 7 7 7 7 7 7 7 7 7 ...\n     $ relprefPR  : int  21 21 21 21 21 21 21 21 21 21 ...\n     $ relraisedPR: int  21 21 21 21 21 21 21 21 21 21 ...\n     $ year       : int  1997 1998 1999 2000 2001 2002 2003 2004 2005 2006 ...\n     $ agemon     : num  190 206 219 231 243 256 266 279 290 302 ...\n     $ ageyear    : num  15 17 18 19 20 21 22 23 24 25 ...\n     $ famrel     : num  NA NA NA NA NA NA NA NA NA NA ...\n     $ attend     : num  NA NA NA 1 6 2 1 1 1 1 ...\n     $ values     : num  NA NA NA NA NA 1 NA NA 0 NA ...\n     $ todo       : num  NA NA NA NA NA 1 NA NA 1 NA ...\n     $ obeyed     : num  NA NA NA NA NA 1 NA NA 0 NA ...\n     $ pray       : num  NA NA NA NA NA 0 NA NA 0 NA ...\n     $ decisions  : num  NA NA NA NA NA 1 NA NA 1 NA ...\n     $ relpref    : num  NA NA NA NA NA NA NA NA 21 NA ...\n     $ bornagain  : num  NA NA NA NA NA NA NA NA NA NA ...\n     $ faith      : num  NA NA NA NA NA NA NA NA NA NA ...\n     $ calm       : num  NA NA NA 3 NA 4 NA 4 NA 4 ...\n     $ blue       : num  NA NA NA 3 NA 2 NA 1 NA 1 ...\n     $ happy      : num  NA NA NA 3 NA 3 NA 4 NA 4 ...\n     $ depressed  : num  NA NA NA 3 NA 2 NA 1 NA 1 ...\n     $ nervous    : num  NA NA NA 3 NA 1 NA 1 NA 1 ...\n     $ tv         : num  NA NA NA NA NA 2 NA NA NA NA ...\n     $ computer   : num  NA NA NA NA NA 5 NA NA NA NA ...\n     $ internet   : num  NA NA NA NA NA NA 1 0 1 1 ...\n\n[LabelingFactorLevels.R](https://github.com/andkov/Longitudinal_Models_of_Religiosity_NLSY97/blob/master/Scripts/Data/LabelingFactorLevels.R)\nsourced at the end of\n[Derive\\_dsL\\_from\\_Extract](https://github.com/andkov/Longitudinal_Models_of_Religiosity_NLSY97/blob/master/Data/Derive_dsL_from_Extract.md)\nmatches numeric values with response labels from the questionnaire and\nadds to **dsL** copies of the variables, saved as labeled factors. For\nestimations routines such as <code>lme4</code> or graphing functions\nsuch as <code>ggplot</code>, the data type (string,numeric, factor) is a\nmeaningful input, so a quick access to both formats frequently proves\nuseful. It is convenient to think that **dsL** contains only\n\n    ncol(dsL)/2\n\n    [1] 30\n\nvariables, but each of them has a double, a labeled factor.\n\n    str(dsL)\n\n    'data.frame':   134745 obs. of  60 variables:\n     $ sample      : int  1 1 1 1 1 1 1 1 1 1 ...\n     $ id          : int  1 1 1 1 1 1 1 1 1 1 ...\n     $ sex         : int  2 2 2 2 2 2 2 2 2 2 ...\n     $ race        : int  4 4 4 4 4 4 4 4 4 4 ...\n     $ bmonth      : int  9 9 9 9 9 9 9 9 9 9 ...\n     $ byear       : int  1981 1981 1981 1981 1981 1981 1981 1981 1981 1981 ...\n     $ attendPR    : int  7 7 7 7 7 7 7 7 7 7 ...\n     $ relprefPR   : int  21 21 21 21 21 21 21 21 21 21 ...\n     $ relraisedPR : int  21 21 21 21 21 21 21 21 21 21 ...\n     $ year        : int  1997 1998 1999 2000 2001 2002 2003 2004 2005 2006 ...\n     $ agemon      : num  190 206 219 231 243 256 266 279 290 302 ...\n     $ ageyear     : num  15 17 18 19 20 21 22 23 24 25 ...\n     $ famrel      : num  NA NA NA NA NA NA NA NA NA NA ...\n     $ attend      : num  NA NA NA 1 6 2 1 1 1 1 ...\n     $ values      : num  NA NA NA NA NA 1 NA NA 0 NA ...\n     $ todo        : num  NA NA NA NA NA 1 NA NA 1 NA ...\n     $ obeyed      : num  NA NA NA NA NA 1 NA NA 0 NA ...\n     $ pray        : num  NA NA NA NA NA 0 NA NA 0 NA ...\n     $ decisions   : num  NA NA NA NA NA 1 NA NA 1 NA ...\n     $ relpref     : num  NA NA NA NA NA NA NA NA 21 NA ...\n     $ bornagain   : num  NA NA NA NA NA NA NA NA NA NA ...\n     $ faith       : num  NA NA NA NA NA NA NA NA NA NA ...\n     $ calm        : num  NA NA NA 3 NA 4 NA 4 NA 4 ...\n     $ blue        : num  NA NA NA 3 NA 2 NA 1 NA 1 ...\n     $ happy       : num  NA NA NA 3 NA 3 NA 4 NA 4 ...\n     $ depressed   : num  NA NA NA 3 NA 2 NA 1 NA 1 ...\n     $ nervous     : num  NA NA NA 3 NA 1 NA 1 NA 1 ...\n     $ tv          : num  NA NA NA NA NA 2 NA NA NA NA ...\n     $ computer    : num  NA NA NA NA NA 5 NA NA NA NA ...\n     $ internet    : num  NA NA NA NA NA NA 1 0 1 1 ...\n     $ sampleF     : Ord.factor w/ 2 levels \"Cross-Sectional\"<..: 1 1 1 1 1 1 1 1 1 1 ...\n     $ idF         : Factor w/ 8983 levels \"1\",\"2\",\"3\",\"4\",..: 1 1 1 1 1 1 1 1 1 1 ...\n     $ sexF        : Ord.factor w/ 3 levels \"Male\"<\"Female\"<..: 2 2 2 2 2 2 2 2 2 2 ...\n     $ raceF       : Ord.factor w/ 4 levels \"Black\"<\"Hispanic\"<..: 4 4 4 4 4 4 4 4 4 4 ...\n     $ bmonthF     : Ord.factor w/ 12 levels \"Jan\"<\"Feb\"<\"Mar\"<..: 9 9 9 9 9 9 9 9 9 9 ...\n     $ byearF      : Factor w/ 5 levels \"1980\",\"1981\",..: 2 2 2 2 2 2 2 2 2 2 ...\n     $ attendPRF   : Ord.factor w/ 8 levels \"Never\"<\"Once or Twice\"<..: 7 7 7 7 7 7 7 7 7 7 ...\n     $ relprefPRF  : Ord.factor w/ 33 levels \"Catholic\"<\"Baptist\"<..: 21 21 21 21 21 21 21 21 21 21 ...\n     $ relraisedPRF: Ord.factor w/ 33 levels \"Catholic\"<\"Baptist\"<..: 21 21 21 21 21 21 21 21 21 21 ...\n     $ yearF       : Factor w/ 15 levels \"1997\",\"1998\",..: 1 2 3 4 5 6 7 8 9 10 ...\n     $ agemonF     : Factor w/ 244 levels \"146\",\"147\",\"148\",..: 45 61 74 86 98 111 121 134 145 157 ...\n     $ ageyearF    : Factor w/ 21 levels \"12\",\"13\",\"14\",..: 4 6 7 8 9 10 11 12 13 14 ...\n     $ famrelF     : Factor w/ 8 levels \"0\",\"1\",\"2\",\"3\",..: NA NA NA NA NA NA NA NA NA NA ...\n     $ attendF     : Ord.factor w/ 8 levels \"Never\"<\"Once or Twice\"<..: NA NA NA 1 6 2 1 1 1 1 ...\n     $ valuesF     : Ord.factor w/ 2 levels \"FALSE/less Religious\"<..: NA NA NA NA NA 2 NA NA 1 NA ...\n     $ todoF       : Ord.factor w/ 2 levels \"FALSE/less Religious\"<..: NA NA NA NA NA 2 NA NA 2 NA ...\n     $ obeyedF     : Ord.factor w/ 2 levels \"FALSE/less Religious\"<..: NA NA NA NA NA 2 NA NA 1 NA ...\n     $ prayF       : Ord.factor w/ 2 levels \"FALSE/less Religious\"<..: NA NA NA NA NA 1 NA NA 1 NA ...\n     $ decisionsF  : Ord.factor w/ 2 levels \"FALSE/less Religious\"<..: NA NA NA NA NA 2 NA NA 2 NA ...\n     $ relprefF    : Ord.factor w/ 33 levels \"Catholic\"<\"Baptist\"<..: NA NA NA NA NA NA NA NA 21 NA ...\n     $ bornagainF  : Ord.factor w/ 2 levels \"NO\"<\"YES\": NA NA NA NA NA NA NA NA NA NA ...\n     $ faithF      : Ord.factor w/ 5 levels \"Exrtemely\"<\"Very\"<..: NA NA NA NA NA NA NA NA NA NA ...\n     $ calmF       : Ord.factor w/ 4 levels \"All of the time\"<..: NA NA NA NA NA NA NA NA NA NA ...\n     $ blueF       : Ord.factor w/ 4 levels \"All of the time\"<..: NA NA NA NA NA NA NA NA NA NA ...\n     $ happyF      : Ord.factor w/ 4 levels \"All of the time\"<..: NA NA NA NA NA NA NA NA NA NA ...\n     $ depressedF  : Ord.factor w/ 4 levels \"All of the time\"<..: NA NA NA NA NA NA NA NA NA NA ...\n     $ nervousF    : Ord.factor w/ 4 levels \"All of the time\"<..: NA NA NA NA NA NA NA NA NA NA ...\n     $ tvF         : Ord.factor w/ 6 levels \"less than 2\"<..: NA NA NA NA NA 2 NA NA NA NA ...\n     $ computerF   : Ord.factor w/ 6 levels \"None\"<\"less than 1\"<..: NA NA NA NA NA 5 NA NA NA NA ...\n     $ internetF   : Ord.factor w/ 2 levels \"No\"<\"Yes\": NA NA NA NA NA NA 2 1 2 2 ...\n\nThis give a certain flexibity to assemble needed dataset quickly and\nhave access to factor labels. One can alternate between the raw metric\nand labeled factor by adding \"F\" suffix to the end of the variable name:\n\n    selectCols<-c(\"year\",\"id\",\"byear\",\"attend\",\"attendF\") # select the columns with these names\n    ds<-dsL[,selectCols] # select all rows for the columns listed  selectCols\n    print(ds[ds$id==1,]) # print all availible data for respondent with ID 1\n\n       year id byear attend         attendF\n    1  1997  1  1981     NA            <NA>\n    2  1998  1  1981     NA            <NA>\n    3  1999  1  1981     NA            <NA>\n    4  2000  1  1981      1           Never\n    5  2001  1  1981      6 About once/week\n    6  2002  1  1981      2   Once or Twice\n    7  2003  1  1981      1           Never\n    8  2004  1  1981      1           Never\n    9  2005  1  1981      1           Never\n    10 2006  1  1981      1           Never\n    11 2007  1  1981      1           Never\n    12 2008  1  1981      1           Never\n    13 2009  1  1981      1           Never\n    14 2010  1  1981      1           Never\n    15 2011  1  1981      1           Never\n\nHaving quick access to factor labels will be especially useful during\ngraph production. For the grammer rules of operations with relevant data\nsee [Data Manipulation\nGuide](https://github.com/andkov/Longitudinal_Models_of_Religiosity_NLSY97/blob/master/Vignettes/dplyr/Data_Manipulation_Guide.md).\n\nTime metrics : Age, Period, Cohort\n----------------------------------\n\nNLSY97 sample includes individuals from five cohorts, born between 1980\nand 1984.The following graphics shows how birth cohort, age of\nrespondents, and round of observation are related in NSLY97.  \n![Figure 3.1](./figure_rmd/3_Methods_Figure_3_1.png)\n\nNSLY97 contains static and dynamic indicators of age. Variables byear\nand bmonth were recorded once in 1997 (static) and contain\nrespondentsâ€™ birth year and birth month respectively. Two age\nvariables were recorded continuously at each interview (dynamic): age at\nthe time of the interview in months (agemon) and in years (ageyear).\n\n    ds<- dsL %>% dplyr::filter(id==25, year %in% c(1997:2011)) %>% dplyr::select(id,bmonthF,byear,year, agemon,ageyear) %>%\n      mutate (age = (year-byear+1), ageD = agemon/12)\n    print(ds)\n\n       id bmonthF byear year agemon ageyear age  ageD\n    1  25     Mar  1983 1997    167      13  15 13.92\n    2  25     Mar  1983 1998    188      15  16 15.67\n    3  25     Mar  1983 1999    201      16  17 16.75\n    4  25     Mar  1983 2000    214      17  18 17.83\n    5  25     Mar  1983 2001    226      18  19 18.83\n    6  25     Mar  1983 2002    236      19  20 19.67\n    7  25     Mar  1983 2003    254      21  21 21.17\n    8  25     Mar  1983 2004    261      21  22 21.75\n    9  25     Mar  1983 2005    272      22  23 22.67\n    10 25     Mar  1983 2006    284      23  24 23.67\n    11 25     Mar  1983 2007    295      24  25 24.58\n    12 25     Mar  1983 2008    307      25  26 25.58\n    13 25     Mar  1983 2009    319      26  27 26.58\n    14 25     Mar  1983 2010    332      27  28 27.67\n    15 25     Mar  1983 2011    342      28  29 28.50\n\nThe variable ageyear records the full number of years a respondent\nreached at the time of the interview. Due to difficulties of\nadministering the survey, time intervals between the waves could differ.\nFor example, for one person id = 25 the age was recorded as 21 years for\nboth 2003 and 2004 (see ageyear). However, when you examine age in\nmonths (agemon) you can see this rounding issue disappears, once a more\nprecise scale is used. To avoid this potentially confusing peculiarity,\nage in years will be calculated as age = year â€“ byear +1 or as (ageD =\nagemon/12). The suffix D in ageD refers to the fact that it was\ncalculated from a dynamic age indicator.\n",
    "created" : 1403933490203.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3312739701",
    "id" : "7D6644F",
    "lastKnownWriteTime" : 1403926966,
    "path" : "~/GitHub/Longitudinal_Models_of_Religiosity_NLSY97/Models/Descriptives/Metrics.md",
    "project_path" : "Models/Descriptives/Metrics.md",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "markdown"
}